{% extends 'base.html' %}

{% block content %}             
    <h1 data-username="{{ user_profile.username }}">
        Profil de {{ user_profile.username }}
    </h1>
    {% if request.user != user_profile %}
    <div id="follow-section">
        {% if is_following %}
        <p id="followMessage">Vous suivez cet utilisateur.</p>
        <button class="button_unfollow">Se désabonner</button>
        <button class="button_follow" style="display:none;">Suivre</button>
        {% else %}
        <p id="followMessage" style="display:none;">Vous suivez cet utilisateur.</p>
        <button class="button_unfollow" style="display:none;">Se désabonner</button>
        <button class="button_follow">Suivre</button>
        {% endif %}
    </div>
    {% endif %}


<!-- Modal -->
<div id="followModal" class="modal">
  <div class="modal-content">
    <p id="followMessage"></p>
  </div>
</div>

<h2>Posts de {{ user_profile.username }}</h2>

    {% for post in posts %}
        <div class="flux">
            <ul class="posts-grid home-posts-grid">
                <li class="post-card">
                    <a href="{% url 'post-detail' post.id %}" class="title-link">{{ post.title }}</a>
                    <p>Posté par <a href="{% url 'profile' post.author.username %}">{{ post.author.username }}</a></p>

                    {% if post.image %}
                    <div class="photo">
                        <a href="{% url 'post-detail' post.id %}">
                        <img src="{{ post.image.image.url }}" alt="{{ post.image.caption }}" />
                        </a>
                    </div>
                    {% endif %}
                </li>
            </ul>
        </div>
    {% empty %}
        <li>Aucun post</li>
    {% endfor %}

{% endblock %}